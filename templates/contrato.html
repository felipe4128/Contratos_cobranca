<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Contrato {{ contrato.id }}</title>
  <style>
    :root { --cor-primaria:#00AE9D;--cor-escura:#003641;--cor-secundaria:#C9D200;}
    body{font-family:Arial,sans-serif;margin:20px;}
    header,footer{background:var(--cor-escura);color:#fff;padding:10px;text-align:center;}
    table{width:100%;border-collapse:collapse;margin-top:10px;}
    th{background:var(--cor-escura);color:white;padding:8px;}
    td{border:1px solid #ddd;padding:8px;}
    button,a.button{background:var(--cor-primaria);color:#fff;border:none;padding:6px 12px;border-radius:4px;text-decoration:none;cursor:pointer;}
    a.button:hover,button:hover{background:var(--cor-secundaria);}
  </style>
</head>
<body>
<header><h1>Contrato {{ contrato.id }}</h1></header>
<form method="POST">
  {% for field,value in contrato.__dict__.items() if not field.startswith('_') and field!='id' %}
    <label>{{ field.replace('_',' ').title() }}:</label>
    {% if 'date' in field or 'vencimento' in field %}
      <input type="date" name="{{ field }}" value="{{ value.strftime('%Y-%m-%d') if value else '' }}"><br>
    {% elif field.startswith('obs') %}
      <textarea name="{{ field }}">{{ value or '' }}</textarea><br>
    {% else %}
      <input type="text" name="{{ field }}" value="{{ value or '' }}"><br>
    {% endif %}
  {% endfor %}
  <button type="submit">Salvar</button>
</form>

<h2>Parcelas</h2>
<table>
  <tr><th>Num</th><th>Valor</th><th>Vencimento</th><th>Quitada</th><th>Ação</th></tr>
  {% for p in parcelas %}
  <tr>
    <td>{{ p.numero }}</td>
    <td>{{ p.valor }}</td>
    <td>{{ p.vencimento.strftime('%d/%m/%Y') if p.vencimento else '' }}</td>
    <td>{{ 'Sim' if p.quitada else 'Não' }}</td>
    <td>
      {% if not p.quitada %}
      <form method="POST" action="{{ url_for('quitar_parcela', id=p.id) }}"><button type="submit">Quitar</button></form>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
<a href="{{ url_for('index') }}" class="button">Voltar</a>
<footer>Sistema desenvolvido com Flask</footer>
</body>
</html>