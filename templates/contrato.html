<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Detalhes do Contrato</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg" style="background-color: #003641;">
  <span class="navbar-brand text-white">Detalhes do Contrato</span>
</nav>
<div class="container my-4">
  <h3>Contrato {{ contrato.numero }}</h3>
  <form method="post">
    <div class="form-group"><label>CPF</label><input type="text" name="cpf" value="{{ contrato.cpf }}" class="form-control"></div>
    <div class="form-group"><label>Cliente</label><input type="text" name="cliente" value="{{ contrato.cliente }}" class="form-control"></div>
    <div class="form-group"><label>Valor</label><input type="number" step="0.01" name="valor" value="{{ contrato.valor }}" class="form-control"></div>
    <div class="form-group"><label>Demais Informações</label><textarea name="demais_info" class="form-control" rows="5">{{ contrato.demais_info or '' }}</textarea></div>
    <button class="btn btn-primary">Atualizar</button>
  </form>
  <hr>
  <h5>Parcelas</h5>
  <table class="table table-sm">
    <thead><tr><th>#</th><th>Vencimento</th><th>Valor</th><th>Status</th></tr></thead>
    <tbody>
      {% for p in parcelas %}
      <tr>
        <td>{{ p.numero }}</td>
        <td>{{ p.vencimento.strftime('%d/%m/%Y') }}</td>
        <td>R$ {{ '%.2f'|format(p.valor) }}</td>
        <td>
          {% if p.quitada %}
            Quitada
          {% else %}
            <form method="post" action="{{ url_for('quitar_parcela', id=p.id) }}"><button class="btn btn-sm btn-success">Quitar</button></form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<footer class="bg-dark text-white text-center py-3">Desenvolvido com Flask</footer>
</body>
</html>
